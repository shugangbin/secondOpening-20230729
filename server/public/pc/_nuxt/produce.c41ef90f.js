import{E as ut}from"./index.2c2c5c5c.js";import{m as Ce,p as Le,q as pt,U as Ae,C as Oe,s as mt,r as E,v as te,x as ft,y as ue,b as C,a as V,o as c,i as v,z as W,k as I,u as a,A as pe,c as k,e as h,B as K,D as _t,T as Fe,E as vt,h as p,G as yt,H as Y,t as J,f as y,I as ht,J as Ue,K as ce,L as Me,M as ke,N as Ke,O as gt,P as bt,Q as wt,R as Ct,S as Te,V as kt,W as xt,X as ne,l as M,Y as Et,Z as Vt,$ as $t,a0 as He,a1 as St,a2 as O,a3 as xe,a4 as Ee,F as T,j as A,a5 as re,a6 as It,a7 as Ve,a8 as $e,a9 as Bt,aa as Rt,ab as Tt,ac as Ne,w as he,ad as ee,ae as Ht,af as Nt,ag as Dt,ah as Pt,ai as zt}from"./entry.47644ad8.js";import{c as De,E as Lt,a as At}from"./index.12dda1e0.js";import"./el-form-item.4ed993c7.js";/* empty css                */import{E as Ot,a as Ft}from"./index.d9644e45.js";/* empty css                     *//* empty css                  */import{_ as oe}from"./_plugin-vue_export-helper.c27b6911.js";import{E as Ut,a as Mt}from"./el-radio-group.6b371e28.js";import{E as Kt,a as qt}from"./index.882e72fb.js";import{_ as qe,a as Wt,c as jt,b as Gt,g as Yt}from"./model-picker.vue.156c1490.js";import{_ as Jt}from"./index.vue.41260c16.js";import{_ as Xt}from"./index.vue.758401c0.js";import{E as ie}from"./index.5f1ada03.js";import{d as Qt,a as Zt,u as eo}from"./use-dialog.c1a38897.js";import{_ as to}from"./layout.6eb0f29a.js";import{u as ge}from"./asyncData.66979bec.js";import{w as oo,u as lo,a as so}from"./index.1d02bbbe.js";import{g as ao,a as no}from"./create.85b8931c.js";import{g as ro}from"./position.0a5dfbe0.js";import{t as Pe}from"./throttle.a2b1ebd6.js";import"./_baseClone.7cdf9853.js";import"./_getTag.ff85c21b.js";import"./index.fd4342e5.js";import"./strings.6f89bc4f.js";import"./isEqual.1f1c08b1.js";import"./debounce.ad6365f0.js";import"./_commonjsHelpers.042e6b4d.js";import"./client-only.50432bec.js";import"./index.d4d0012e.js";import"./dropdown.515293b4.js";import"./refs.1a6521b3.js";/* empty css                *//* empty css                    */const We=()=>Math.floor(Math.random()*1e4),ze=e=>typeof mt(e),io=Ce({accordion:Boolean,modelValue:{type:Le([Array,String,Number]),default:()=>pt([])}}),co={[Ae]:ze,[Oe]:ze},je=Symbol("collapseContextKey"),uo=(e,s)=>{const o=E(De(e.modelValue)),t=n=>{o.value=n;const r=e.accordion?o.value[0]:o.value;s(Ae,r),s(Oe,r)},l=n=>{if(e.accordion)t([o.value[0]===n?"":n]);else{const r=[...o.value],i=r.indexOf(n);i>-1?r.splice(i,1):r.push(n),t(r)}};return te(()=>e.modelValue,()=>o.value=De(e.modelValue),{deep:!0}),ft(je,{activeNames:o,handleItemClick:l}),{activeNames:o,setActiveNames:t}},po=()=>{const e=ue("collapse");return{rootKls:C(()=>e.b())}},mo=V({name:"ElCollapse"}),fo=V({...mo,props:io,emits:co,setup(e,{expose:s,emit:o}){const t=e,{activeNames:l,setActiveNames:n}=uo(t,o),{rootKls:r}=po();return s({activeNames:l,setActiveNames:n}),(i,d)=>(c(),v("div",{class:I(a(r)),role:"tablist","aria-multiselectable":"true"},[W(i.$slots,"default")],2))}});var _o=pe(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const vo=V({name:"ElCollapseTransition"}),yo=V({...vo,setup(e){const s=ue("collapse-transition"),o={beforeEnter(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0},enter(t){t.dataset.oldOverflow=t.style.overflow,t.scrollHeight!==0?(t.style.maxHeight=`${t.scrollHeight}px`,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.maxHeight=0,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},afterEnter(t){t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow},beforeLeave(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.maxHeight=`${t.scrollHeight}px`,t.style.overflow="hidden"},leave(t){t.scrollHeight!==0&&(t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0)},afterLeave(t){t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom}};return(t,l)=>(c(),k(Fe,K({name:a(s).b()},_t(o)),{default:h(()=>[W(t.$slots,"default")]),_:3},16,["name"]))}});var de=pe(yo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);de.install=e=>{e.component(de.name,de)};const ho=de,go=Ce({title:{type:String,default:""},name:{type:Le([String,Number]),default:()=>We()},disabled:Boolean}),bo=e=>{const s=vt(je),o=E(!1),t=E(!1),l=E(We()),n=C(()=>s==null?void 0:s.activeNames.value.includes(e.name));return{focusing:o,id:l,isActive:n,handleFocus:()=>{setTimeout(()=>{t.value?t.value=!1:o.value=!0},50)},handleHeaderClick:()=>{e.disabled||(s==null||s.handleItemClick(e.name),o.value=!1,t.value=!0)},handleEnterClick:()=>{s==null||s.handleItemClick(e.name)}}},wo=(e,{focusing:s,isActive:o,id:t})=>{const l=ue("collapse"),n=C(()=>[l.b("item"),l.is("active",a(o)),l.is("disabled",e.disabled)]),r=C(()=>[l.be("item","header"),l.is("active",a(o)),{focusing:a(s)&&!e.disabled}]),i=C(()=>[l.be("item","arrow"),l.is("active",a(o))]),d=C(()=>l.be("item","wrap")),u=C(()=>l.be("item","content")),m=C(()=>l.b(`content-${a(t)}`)),b=C(()=>l.b(`head-${a(t)}`));return{arrowKls:i,headKls:r,rootKls:n,itemWrapperKls:d,itemContentKls:u,scopedContentId:m,scopedHeadId:b}},Co=["aria-expanded","aria-controls","aria-describedby"],ko=["id","tabindex"],xo=["id","aria-hidden","aria-labelledby"],Eo=V({name:"ElCollapseItem"}),Vo=V({...Eo,props:go,setup(e,{expose:s}){const o=e,{focusing:t,id:l,isActive:n,handleFocus:r,handleHeaderClick:i,handleEnterClick:d}=bo(o),{arrowKls:u,headKls:m,rootKls:b,itemWrapperKls:z,itemContentKls:w,scopedContentId:$,scopedHeadId:F}=wo(o,{focusing:t,isActive:n,id:l});return s({isActive:n}),(H,B)=>(c(),v("div",{class:I(a(b))},[p("div",{role:"tab","aria-expanded":a(n),"aria-controls":a($),"aria-describedby":a($)},[p("div",{id:a(F),class:I(a(m)),role:"button",tabindex:H.disabled?-1:0,onClick:B[0]||(B[0]=(...L)=>a(i)&&a(i)(...L)),onKeypress:B[1]||(B[1]=yt(ke((...L)=>a(d)&&a(d)(...L),["stop","prevent"]),["space","enter"])),onFocus:B[2]||(B[2]=(...L)=>a(r)&&a(r)(...L)),onBlur:B[3]||(B[3]=L=>t.value=!1)},[W(H.$slots,"title",{},()=>[Y(J(H.title),1)]),y(a(Ue),{class:I(a(u))},{default:h(()=>[y(a(ht))]),_:1},8,["class"])],42,ko)],8,Co),y(a(ho),null,{default:h(()=>[ce(p("div",{id:a($),class:I(a(z)),role:"tabpanel","aria-hidden":!a(n),"aria-labelledby":a(F)},[p("div",{class:I(a(w))},[W(H.$slots,"default")],2)],10,xo),[[Me,a(n)]])]),_:3})],2))}});var Ge=pe(Vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const $o=Ke(_o,{CollapseItem:Ge}),So=gt(Ge),Io=Ce({...Qt,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),Bo=Zt,Ro=V({name:"ElDrawer",components:{ElOverlay:bt,ElFocusTrap:wt,ElIcon:Ue,Close:Ct},inheritAttrs:!1,props:Io,emits:Bo,setup(e,{slots:s}){Te({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},C(()=>!!s.title)),Te({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},C(()=>!!e.customClass));const o=E(),t=E(),l=ue("drawer"),{t:n}=kt(),r=C(()=>e.direction==="rtl"||e.direction==="ltr"),i=C(()=>xt(e.size));return{...eo(e,o),drawerRef:o,focusStartRef:t,isHorizontal:r,drawerSize:i,ns:l,t:n}}}),To=["aria-label","aria-labelledby","aria-describedby"],Ho=["id"],No=["aria-label"],Do=["id"];function Po(e,s,o,t,l,n){const r=ne("close"),i=ne("el-icon"),d=ne("el-focus-trap"),u=ne("el-overlay");return c(),k(Et,{to:"body",disabled:!e.appendToBody},[y(Fe,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:h(()=>[ce(y(u,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:h(()=>[y(d,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:h(()=>[p("div",K({ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId},e.$attrs,{class:[e.ns.b(),e.direction,e.visible&&"open",e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,role:"dialog",onClick:s[1]||(s[1]=ke(()=>{},["stop"]))}),[p("span",{ref:"focusStartRef",class:I(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(c(),v("header",{key:0,class:I(e.ns.e("header"))},[e.$slots.title?W(e.$slots,"title",{key:1},()=>[M(" DEPRECATED SLOT ")]):W(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?M("v-if",!0):(c(),v("span",{key:0,id:e.titleId,role:"heading",class:I(e.ns.e("title"))},J(e.title),11,Ho))]),e.showClose?(c(),v("button",{key:2,"aria-label":e.t("el.drawer.close"),class:I(e.ns.e("close-btn")),type:"button",onClick:s[0]||(s[0]=(...m)=>e.handleClose&&e.handleClose(...m))},[y(i,{class:I(e.ns.e("close"))},{default:h(()=>[y(r)]),_:1},8,["class"])],10,No)):M("v-if",!0)],2)):M("v-if",!0),e.rendered?(c(),v("div",{key:1,id:e.bodyId,class:I(e.ns.e("body"))},[W(e.$slots,"default")],10,Do)):M("v-if",!0),e.$slots.footer?(c(),v("div",{key:2,class:I(e.ns.e("footer"))},[W(e.$slots,"footer")],2)):M("v-if",!0)],16,To)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Me,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var zo=pe(Ro,[["render",Po],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Lo=Ke(zo),P="ElInfiniteScroll",Ao=50,Oo=200,Fo=0,Uo={delay:{type:Number,default:Oo},distance:{type:Number,default:Fo},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Se=(e,s)=>Object.entries(Uo).reduce((o,[t,l])=>{var n,r;const{type:i,default:d}=l,u=e.getAttribute(`infinite-scroll-${t}`);let m=(r=(n=s[u])!=null?n:u)!=null?r:d;return m=m==="false"?!1:m,m=i(m),o[t]=Number.isNaN(m)?d:m,o},{}),Ye=e=>{const{observer:s}=e[P];s&&(s.disconnect(),delete e[P].observer)},Mo=(e,s)=>{const{container:o,containerEl:t,instance:l,observer:n,lastScrollTop:r}=e[P],{disabled:i,distance:d}=Se(e,l),{clientHeight:u,scrollHeight:m,scrollTop:b}=t,z=b-r;if(e[P].lastScrollTop=b,n||i||z<0)return;let w=!1;if(o===e)w=m-(u+b)<=d;else{const{clientTop:$,scrollHeight:F}=e,H=ro(e,t);w=b+u>=H+$+F-d}w&&s.call(l)};function be(e,s){const{containerEl:o,instance:t}=e[P],{disabled:l}=Se(e,t);l||o.clientHeight===0||(o.scrollHeight<=o.clientHeight?s.call(t):Ye(e))}const Ko={async mounted(e,s){const{instance:o,value:t}=s;Vt(t)||$t(P,"'v-infinite-scroll' binding value must be a function"),await He();const{delay:l,immediate:n}=Se(e,o),r=St(e,!0),i=r===window?document.documentElement:r,d=Pe(Mo.bind(null,e,t),l);if(r){if(e[P]={instance:o,container:r,containerEl:i,delay:l,cb:t,onScroll:d,lastScrollTop:i.scrollTop},n){const u=new MutationObserver(Pe(be.bind(null,e,t),Ao));e[P].observer=u,u.observe(e,{childList:!0,subtree:!0}),be(e,t)}r.addEventListener("scroll",d)}},unmounted(e){const{container:s,onScroll:o}=e[P];s==null||s.removeEventListener("scroll",o),Ye(e)},async updated(e){if(!e[P])await He();else{const{containerEl:s,cb:o,observer:t}=e[P];s.clientHeight&&t&&be(e,o)}}},we=Ko;we.install=e=>{e.directive("InfiniteScroll",we)};const qo=we,Wo=V({__name:"input",props:{id:{},size:{},disabled:{type:Boolean},modelValue:{},type:{},resize:{},autosize:{},autocomplete:{},formatter:{},parser:{},placeholder:{},form:{},readonly:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},showWordLimit:{type:Boolean,default:!0},suffixIcon:{},prefixIcon:{},containerRole:{},label:{},tabindex:{},validateEvent:{type:Boolean},inputStyle:{}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,t=C({get(){return o.modelValue},set(l){s("update:modelValue",l)}});return(l,n)=>{const r=xe;return c(),k(r,K(o,{modelValue:a(t),"onUpdate:modelValue":n[0]||(n[0]=i=>O(t)?t.value=i:null)}),null,16,["modelValue"])}}}),jo=V({__name:"textarea",props:{id:{},size:{},disabled:{type:Boolean},modelValue:{},type:{},resize:{},autosize:{},autocomplete:{},formatter:{},parser:{},placeholder:{},form:{},readonly:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},showWordLimit:{type:Boolean,default:!0},suffixIcon:{},prefixIcon:{},containerRole:{},label:{},tabindex:{},validateEvent:{type:Boolean},inputStyle:{}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,t=C({get(){return o.modelValue},set(l){s("update:modelValue",l)}});return(l,n)=>{const r=xe;return c(),k(r,K(o,{modelValue:a(t),"onUpdate:modelValue":n[0]||(n[0]=i=>O(t)?t.value=i:null),type:"textarea",autosize:l.autosize?{minRows:2}:!1}),null,16,["modelValue","autosize"])}}});const Go=V({__name:"select",props:{defaultValue:{},modelValue:{},options:{default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,t=C({get(){return o.modelValue},set(l){s("update:modelValue",l)}});return Ee(()=>{o.defaultValue&&(t.value=o.defaultValue)}),(l,n)=>{const r=Ot,i=Ft;return c(),k(i,K(l.$attrs,{modelValue:a(t),"onUpdate:modelValue":n[0]||(n[0]=d=>O(t)?t.value=d:null)}),{default:h(()=>[(c(!0),v(T,null,A(l.options,(d,u)=>(c(),k(r,{key:u,label:d,value:d},null,8,["label","value"]))),128))]),_:1},16,["modelValue"])}}});const Yo=oe(Go,[["__scopeId","data-v-bf7a521e"]]);const Jo=V({__name:"radio",props:{modelValue:{},options:{},defaultValue:{}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,t=C({get(){return o.modelValue},set(l){s("update:modelValue",l)}});return Ee(()=>{o.defaultValue&&(t.value=o.defaultValue)}),(l,n)=>{const r=Ut,i=Mt;return c(),k(i,K(l.$attrs,{modelValue:a(t),"onUpdate:modelValue":n[0]||(n[0]=d=>O(t)?t.value=d:null)}),{default:h(()=>[(c(!0),v(T,null,A(l.options,(d,u)=>(c(),k(r,{key:u,label:d,name:d},null,8,["label","name"]))),128))]),_:1},16,["modelValue"])}}});const Xo=oe(Jo,[["__scopeId","data-v-231e96fe"]]);const Qo=V({__name:"checkbox",props:{modelValue:{},options:{},defaultValue:{}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,t=C({get(){return o.modelValue},set(l){s("update:modelValue",l)}});return Ee(()=>{o.defaultValue&&(t.value=o.defaultValue)}),(l,n)=>{const r=Kt,i=qt;return c(),k(i,K(l.$attrs,{modelValue:a(t),"onUpdate:modelValue":n[0]||(n[0]=d=>O(t)?t.value=d:null)}),{default:h(()=>[(c(!0),v(T,null,A(l.options,(d,u)=>(c(),k(r,{key:u,label:d,name:d},null,8,["label","name"]))),128))]),_:1},16,["modelValue"])}}});const Zo=oe(Qo,[["__scopeId","data-v-71662013"]]),el=Object.freeze(Object.defineProperty({__proto__:null,WidgetCheckbox:Zo,WidgetInput:Wo,WidgetRadio:Xo,WidgetSelect:Yo,WidgetTextarea:jo},Symbol.toStringTag,{value:"Module"})),tl=V({__name:"index",props:{formLists:{default:()=>[]},modelValue:{},model:{},rules:{},labelPosition:{default:"top"},requireAsteriskPosition:{},labelWidth:{},labelSuffix:{},inline:{type:Boolean},inlineMessage:{type:Boolean},statusIcon:{type:Boolean},showMessage:{type:Boolean},validateOnRuleChange:{type:Boolean},hideRequiredAsterisk:{type:Boolean},scrollToError:{type:Boolean},scrollIntoViewOptions:{},size:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:s,emit:o}){const t=e,l=re(),n=C({get(){return t.modelValue},set(u){o("update:modelValue",u)}}),r=E({}),i=u=>el[u],d=async()=>{var u;await((u=l.value)==null?void 0:u.validate()),console.log(1111)};return te(()=>t.formLists,u=>{r.value=u==null?void 0:u.reduce((m,b)=>(n.value[b.id]=void 0,b.props.isRequired&&(m[b.id]=[{required:!0,message:"必填项不能为空",trigger:"blur"}]),m),{})},{immediate:!0}),s({validate:d}),(u,m)=>{const b=Lt,z=At;return c(),k(z,K({ref_key:"formRef",ref:l},t,{rules:a(r),model:a(n)}),{default:h(()=>[(c(!0),v(T,null,A(u.formLists,w=>(c(),k(b,{key:w.id,prop:w.id,label:w.props.title},{default:h(()=>[(c(),k(It(i(w.name)),K(w.props,{modelValue:a(n)[w.id],"onUpdate:modelValue":$=>a(n)[w.id]=$}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","label"]))),128))]),_:1},16,["rules","model"])}}}),ol={class:"create-record-item"},ll={class:"flex items-center"},sl={class:"mr-auto line-clamp-1 text-lg font-medium"},al={class:"flex items-center flex-none mt-[10px]"},nl={class:"text-xs text-tx-secondary mr-auto"},rl=V({__name:"record-item",props:{title:{default:""},time:{default:""},content:{default:""},showCopy:{type:Boolean,default:!0},overflow:{type:Boolean,default:!1}},emits:["copy"],setup(e,{emit:s}){const o=Ve();return(t,l)=>{var i,d;const n=qe,r=$e;return c(),v("div",ol,[p("div",ll,[p("div",sl,J(t.title),1)]),p("div",{class:I(["mt-[10px]",{"line-clamp-[8]":t.overflow}])},[y(n,{content:t.content,"use-markdown":!!((d=(i=a(o).config)==null?void 0:i.chat)!=null&&d.is_markdown)},null,8,["content","use-markdown"])],2),p("div",al,[p("div",nl,J(t.time),1),t.showCopy?(c(),k(r,{key:0,round:"",size:"small",color:"#F2F2F2",onClick:l[0]||(l[0]=ke(u=>s("copy",t.content),["stop"]))},{default:h(()=>[Y(" 复制 ")]),_:1})):M("",!0)])])}}});const il=oe(rl,[["__scopeId","data-v-dfb7f0ac"]]);const dl={class:"h-full flex flex-col"},cl={class:"flex items-center pb-[16px]"},ul={class:"text-lg flex-1 min-w-0 font-medium"},pl=p("span",{class:"ml-[10px]"},"复制",-1),ml={class:"flex-1 min-h-0"},fl={class:"pt-[16px]"},_l=V({__name:"record-preview",props:{title:{default:""},time:{default:""},content:{default:""},overflow:{type:Boolean,default:!1}},emits:["copy"],setup(e,{expose:s,emit:o}){const t=Ve(),l=E(!1);return s({open:()=>{l.value=!0}}),(r,i)=>{const d=Jt,u=Xt,m=$e,b=qe,z=ie,w=Lo;return c(),k(w,{ref:"drawerRef",modelValue:a(l),"onUpdate:modelValue":i[1]||(i[1]=$=>O(l)?l.value=$:null),title:"创作详情",direction:"rtl",class:"record-preview-drawer",size:"50%","append-to-body":""},{default:h(()=>[p("div",dl,[p("div",cl,[p("div",ul,[y(d,{content:r.title},null,8,["content"])]),y(m,{link:"",onClick:i[0]||(i[0]=$=>o("copy",r.content))},{default:h(()=>[y(u,{name:"el-icon-DocumentCopy",size:18}),pl]),_:1})]),p("div",ml,[y(z,null,{default:h(()=>{var $,F;return[p("div",fl,[y(b,{content:r.content,"use-markdown":!!((F=($=a(t).config)==null?void 0:$.chat)!=null&&F.is_markdown)},null,8,["content","use-markdown"])])]}),_:1})])])]),_:1},8,["modelValue"])}}});const vl=(e,s="yyyy-mm-dd")=>{e||(e=Number(new Date)),e.toString().length==10&&(e*=1e3);const o=new Date(e);let t;const l={"y+":o.getFullYear().toString(),"m+":(o.getMonth()+1).toString(),"d+":o.getDate().toString(),"h+":o.getHours().toString(),"M+":o.getMinutes().toString(),"s+":o.getSeconds().toString()};for(const n in l)t=new RegExp("("+n+")").exec(s),t&&(s=s.replace(t[1],t[1].length==1?l[n]:l[n].padStart(t[1].length,"0")));return s},yl=""+new URL("create_record_null.353a2bee.png",import.meta.url).href,le=e=>(Dt("data-v-04c0f4ae"),e=e(),Pt(),e),hl={class:"bg-white flex flex-col h-full w-[200px] text-tx-primary"},gl={class:"pt-[16px] px-[16px]"},bl={class:"mt-[16px]"},wl={class:"flex justify-end mt-[16px] mb-[10px]"},Cl={class:"flex-1 min-h-0"},kl={class:"creation-lists"},xl={class:"px-[16px]"},El=["onClick"],Vl=["src"],$l={class:"ml-[10px]"},Sl={class:"h-full sm:flex"},Il={class:"xl:h-full xl:w-[400px] flex flex-col rounded-[6px] bg-white p-[20px]"},Bl={class:"flex pb-[20px]"},Rl={class:"text-lg font-medium line-clamp-1 mr-auto"},Tl={class:"flex-1 min-h-0"},Hl={class:""},Nl={class:"flex flex-col justify-center items-center"},Dl={class:"flex-1 sm:ml-[16px] mt-[16px] sm:mt-0 min-w-0"},Pl=le(()=>p("div",{class:"text-lg font-medium mb-[16px]"}," 本次创作结果 ",-1)),zl={key:1,class:"overflow-x-hidden"},Ll=le(()=>p("div",{class:"text-lg font-medium mr-[10px]"}," 创作历史 ",-1)),Al={class:"2xl:flex 2xl:flex-wrap 2xl:mx-[-8px] items-stretch"},Ol={key:1,class:"h-full flex flex-col items-center justify-center py-[100px]"},Fl=le(()=>p("img",{class:"w-[120px] h-[120px]",src:yl,alt:""},null,-1)),Ul=le(()=>p("div",{class:"my-[16px] font-medium"}," AI创作结果会在显示这里，现在你只需要 ",-1)),Ml=le(()=>p("div",{class:"text-tx-regular text-sm"},[Y(" 1. 在左侧填好必要的信息，填写越详细，结果越准确哦 "),p("br"),Y(" 2.点击立即生成按钮，静待AI妙笔生花，一般在10秒内搞定 ")],-1)),Kl=[Fl,Ul,Ml],ql=V({__name:"produce",async setup(e){let s,o;const t=Bt(),l=E(""),n=Rt(),r=re(),i=E(!0),d=E([]),u=E(Number(n.query.id)),m=E({}),b=re(),z=re(),w=E(null),$=Ve(),F=Tt(),H=Ne({title:"",content:""}),B=E(""),{data:L,pending:Wl,refresh:Je}=([s,o]=he(()=>ge(()=>ao({keyword:l.value}),{default(){return[]}},"$p6CyUgWcnC")),s=await s,o(),s),Xe=[{name:"WidgetTextarea",title:"多行文本",id:"question",props:{title:"内容描述",placeholder:"",rows:8,maxlength:400,autosize:!1,isRequired:!1}}],Qe=async()=>{await ee.confirm("确定清空创作记录？"),await jt({type:2,other_id:u.value}),R.value=[],me()},{data:se,refresh:Ze}=([s,o]=he(()=>ge(()=>no({id:u.value}),{default(){return{}},transform(_){return _.form||(_.form=Xe),_}},"$x8e8L4FufG")),s=await s,o(),s),S=Ne({pageNo:1,count:0,pageSize:15,lists:[]}),{refresh:Ie,pending:Be}=([s,o]=he(()=>ge(()=>Yt({other_id:u.value,page_size:S.pageSize,page_no:S.pageNo,type:2}),{default(){return[]},transform(_){S.count=_.count;const f=_.lists.map(x=>{let N="";if(zt(x.ask)){const D=(x==null?void 0:x.ask[0])||{};N=`${D.title}：${D.value}`}else N=x.ask;return{...x,title:N}});return S.pageNo===1&&(S.lists=[]),S.lists.push(...f),f}},"$V2mL5dOeXY")),s=await s,o(),s),me=()=>{Object.assign(S,{pageNo:1,count:0,pageSize:15}),Ie()},et=()=>{Be.value||S.count>=S.pageNo*S.pageSize&&(S.pageNo++,Ie())},tt=(_,f)=>{var x;H.title=_,H.content=f,(x=b.value)==null||x.open()},ot=_=>{u.value=_.id};oo(l,_=>{Je()},{debounce:500});const lt=()=>{var _;(_=se.value)==null||_.form.forEach(f=>{f.props.placeholder&&!f.props.defaultValue&&(m.value[f.id]=f.props.placeholder)})},Re=()=>{i.value?(i.value=!1,d.value=[]):(d.value=L.value.map(_=>_.id),i.value=!0)},R=E([]),st=()=>{var f;if(m.value.question)return m.value.question;const _=((f=se.value)==null?void 0:f.form[0])||{};return`${_.props.title}：${m.value[_.id]||""}`},j=E(!1);let ae=null;const at=()=>{ae==null||ae.cancel(),j.value=!1},nt=async()=>{var _;try{await((_=r.value)==null?void 0:_.validate())}catch{ee.msgError("必填项不能为空");return}try{j.value=!0,await Gt({model:B.value,other_id:u.value,form:m.value.question?void 0:m.value,question:m.value.question,type:2},{onstart(f){ae=f,R.value.length&&(R.value=[],me())},onmessage(f){f.trim().split("data:").forEach(async x=>{if(x!=="")try{const N=JSON.parse(x),{id:D,event:q,data:Q,code:_e,index:X}=N;q=="error"&&_e===101&&$.getIsShowVip?(await Ht.confirm("开通会员，享受更多权益，VIP期间会员免费通道对话不消耗条数","对话余额不足",{confirmButtonText:"前往开通",cancelButtonText:"取消",type:"warning"}),F.push("/openvip")):q=="error"&&ee.msgError(Q);let G=R.value.findIndex(ve=>ve.id===D);if(G===-1&&(R.value.push({create_time:vl(new Date,"yyyy-mm-dd hh:MM:ss"),title:m.value.question?m.value.question:st(),reply:[],id:D}),G=R.value.length-1),Q&&(R.value[G].reply[X]||(R.value[G].reply[X]=""),R.value[G].reply[X]+=Q),q==="finish")return}catch{j.value=!1}})},onclose(){t.getUser(),j.value=!1}})}catch{j.value=!1}},{copy:rt}=lo(),fe=async _=>{try{await rt(_),ee.msgSuccess("复制成功")}catch{ee.msgSuccess("复制失败")}};te(L,_=>{i.value=!1,Re()},{immediate:!0});const{height:it}=so(z);return te(it,_=>{var f,x,N;if(j.value){const D=(x=(f=w.value)==null?void 0:f.wrapRef)==null?void 0:x.offsetHeight,q=_-D;q>0&&((N=w.value)==null||N.setScrollTop(q))}}),te(u,()=>{at(),Ze(),me(),R.value=[],S.lists=[]}),(_,f)=>{const x=ut,N=xe,D=$e,q=So,Q=$o,_e=tl,X=il,G=_l,ve=to,dt=qo,ct=Nt;return c(),k(ve,{name:"default"},{panel:h(()=>[p("div",hl,[p("div",gl,[y(x,{content:"",onBack:f[0]||(f[0]=g=>_.$router.back())}),p("div",bl,[y(N,{modelValue:a(l),"onUpdate:modelValue":f[1]||(f[1]=g=>O(l)?l.value=g:null),placeholder:"请输入关键词搜索"},null,8,["modelValue"])]),p("div",wl,[y(D,{link:"",type:"primary",onClick:Re},{default:h(()=>[Y(" 全部"+J(a(i)?"收起":"展开"),1)]),_:1})])]),p("div",Cl,[y(a(ie),null,{default:h(()=>[p("div",kl,[y(Q,{modelValue:a(d),"onUpdate:modelValue":f[2]||(f[2]=g=>O(d)?d.value=g:null)},{default:h(()=>[(c(!0),v(T,null,A(a(L),g=>(c(),k(q,{key:g.id,title:g.name,name:g.id},{default:h(()=>[p("div",xl,[(c(!0),v(T,null,A(g.model,U=>(c(),v("div",{key:U.id,class:I(["creation-item",{"creation-item--active":a(u)==U.id}]),onClick:Z=>ot(U)},[p("img",{class:"w-[28px] h-28px",src:U.image,alt:""},null,8,Vl),p("div",$l,J(U.name),1)],10,El))),128))])]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])])]),_:1})])])]),default:h(()=>[p("div",Sl,[p("div",Il,[p("div",Bl,[p("div",Rl,J(a(se).name),1),y(D,{link:"",type:"primary",onClick:lt},{default:h(()=>[Y("插入示例")]),_:1})]),p("div",Tl,[y(a(ie),null,{default:h(()=>[p("div",Hl,[y(_e,{ref_key:"formDesignerRef",ref:r,modelValue:a(m),"onUpdate:modelValue":f[3]||(f[3]=g=>O(m)?m.value=g:null),"form-lists":a(se).form,size:"large"},null,8,["modelValue","form-lists"])])]),_:1})]),p("div",null,[y(Wt,{modelValue:a(B),"onUpdate:modelValue":f[4]||(f[4]=g=>O(B)?B.value=g:null)},null,8,["modelValue"]),p("div",Nl,[y(D,{class:"create-btn",onClick:nt,loading:a(j)},{default:h(()=>[Y(" 立即生成 ")]),_:1},8,["loading"])])])]),ce((c(),v("div",Dl,[a(R).length||a(S).lists.length?(c(),k(a(ie),{key:0,ref_key:"scrollbarRef",ref:w},{default:h(()=>[a(R).length?(c(),v("div",{key:0,ref_key:"currentCreationHistoryRef",ref:z},[Pl,(c(!0),v(T,null,A(a(R),(g,U)=>(c(),v(T,{key:U},[(c(!0),v(T,null,A(g.reply,(Z,ye)=>(c(),k(X,{key:ye,class:"mb-[16px]",content:Z,time:g.create_time,title:g.title,onCopy:fe},null,8,["content","time","title"]))),128))],64))),128))],512)):M("",!0),a(S).lists.length?ce((c(),v("div",zl,[p("div",{class:"flex items-center mb-[16px]"},[Ll,p("div",{class:"bg-[#f2f2f2] text-sm px-[15px] py-[2px] rounded-full cursor-pointer",onClick:Qe}," 清空记录 ")]),p("div",Al,[(c(!0),v(T,null,A(a(S).lists,(g,U)=>(c(),v(T,{key:U},[(c(!0),v(T,null,A(g.reply,(Z,ye)=>(c(),v("div",{key:ye,class:"2xl:w-1/2 2xl:px-[8px] mb-[16px]"},[y(X,{class:"cursor-pointer h-full",content:Z,time:g.create_time,title:g.title,overflow:!0,onClick:jl=>tt(g.title,Z),onCopy:fe},null,8,["content","time","title","onClick"])]))),128))],64))),128))])])),[[dt,et]]):M("",!0)]),_:1},512)):(c(),v("div",Ol,Kl))])),[[ct,a(Be)]])]),y(G,{ref_key:"createRecordPreviewRef",ref:b,content:a(H).content,title:a(H).title,onCopy:fe},null,8,["content","title"])]),_:1})}}});const Is=oe(ql,[["__scopeId","data-v-04c0f4ae"]]);export{Is as default};
