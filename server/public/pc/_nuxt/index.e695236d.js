import{a as N,a7 as B,r as f,b as L,o as v,i as h,f as o,e as s,h as e,u as a,t as p,l as S,H as c,b9 as U,a3 as q,a8 as z,ad as A}from"./entry.47644ad8.js";import{_ as D}from"./layout.6eb0f29a.js";import{E as $}from"./index.12dda1e0.js";import{E as I}from"./index.53e0169a.js";import"./el-form-item.4ed993c7.js";/* empty css                  */import{u as y}from"./useLockFn.20997974.js";import"./_baseClone.7cdf9853.js";import"./_getTag.ff85c21b.js";import"./use-dialog.c1a38897.js";import"./refs.1a6521b3.js";function j(d){return $request.get({url:"/cardCode/checkCard",params:d})}function H(d){return $request.post({url:"/cardCode/useCard",params:d})}const Q={class:"redeem-code"},T={class:"h-full bg-white rounded p-[20px]"},G=e("div",{class:"text-[18px] font-medium"},"卡密兑换",-1),J={key:0,class:"flex bg-[#FFFAEF] text-[#F7A935] mt-[20px] p-[12px] rounded"},K={class:"flex pr-[20rpx]"},M=e("span",{class:"mr-[10px]"},"购买链接:",-1),O={class:"flex mt-[20px]"},P=e("div",{class:"text-lg text-center font-medium"}," 查询结果 ",-1),W={class:"h-[160px]"},X={class:"flex-1 flex justify-center items-center bg-white pt-[20px]"},re=N({__name:"index",setup(d){const C=B(),l=f(""),r=f(!1),i=f({content:"",failure_time:"",id:"",sn:"",type:"",type_desc:""}),m=L(()=>C.getCardCodeConfig),g=t=>{U(t)},{isLock:k,lockFn:b}=y(async()=>{try{const t=await j({sn:l.value});r.value=!0,i.value=t}catch(t){l.value="",console.log("查询卡密失败=>",t)}}),{isLock:V,lockFn:w}=y(async()=>{try{await H({sn:l.value}),A.msgSuccess("兑换成功"),r.value=!1,l.value=""}catch(t){console.log("兑换卡密失败=>",t)}});return(t,n)=>{const E=q,x=z,F=D,_=$,R=I;return v(),h("div",Q,[o(F,{name:"default"},{default:s(()=>[e("div",T,[G,a(m).is_show?(v(),h("div",J,[e("div",K,[M,e("span",null,p(a(m).buy_site),1)]),e("div",{class:"underline cursor-pointer ml-[30px]",onClick:n[0]||(n[0]=u=>g(a(m).buy_site))},"复制链接")])):S("",!0),e("div",O,[o(E,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=u=>l.value=u),size:"large",style:{width:"300px"},placeholder:"请输入卡密编号"},null,8,["modelValue"]),o(x,{type:"primary",size:"large",class:"ml-[20px]",loading:a(k),onClick:a(b)},{default:s(()=>[c(" 查询 ")]),_:1},8,["loading","onClick"])])])]),_:1}),o(R,{modelValue:r.value,"onUpdate:modelValue":n[2]||(n[2]=u=>r.value=u),width:"400","append-to-body":""},{header:s(()=>[P]),default:s(()=>[e("div",W,[o(_,{label:"卡密类型："},{default:s(()=>[c(p(i.value.type_desc),1)]),_:1}),o(_,{label:"卡密面额："},{default:s(()=>[c(p(i.value.content),1)]),_:1}),o(_,{label:"卡密失效时间："},{default:s(()=>[c(p(i.value.failure_time),1)]),_:1})]),e("div",X,[o(x,{type:"primary",size:"large",loading:a(V),onClick:a(w)},{default:s(()=>[c(" 立即兑换 ")]),_:1},8,["loading","onClick"])])]),_:1},8,["modelValue"])])}}});export{re as default};
