import{_ as e}from"./page-meta.e1766212.js";import{d as a,x as o,B as t,W as l,r,c as s,o as u,i as d,g as n,f as i,u as c,e as m,n as f,h as p,t as _,j as b,F as g,J as x,ar as v,as as w,aT as h,a as y,b as j,K as V,k,_ as $}from"./index-5fd89c82.js";import{_ as B}from"./u-input.89121eb6.js";import{_ as C}from"./u-form-item.2be3ee00.js";import{_ as R}from"./u-verification-code.500a5db0.js";import{_ as U}from"./u-form.7e2aef85.js";import{_ as G}from"./agreement.1bc7ed82.js";import{_ as T}from"./u-button.ea6057e5.js";import"./u-icon.a1449c4b.js";import"./emitter.1571a5d9.js";import"./u-checkbox.60e8ea24.js";const E=$(a({__name:"register",setup(a){const $=o(),E=x(),I=t(),K=l({account:"",code:"",password:"",password_confirm:""}),S=t(),A=r(""),F=e=>{A.value=e},H=s((()=>uni.$u.test.mobile(K.account))),J=s((()=>{var e;return 1==(null==(e=$.getLoginConfig)?void 0:e.sms_verify)})),L=async()=>{var e,a;K.account&&H.value&&(null==(e=S.value)?void 0:e.canGetCode)&&(await v({scene:w.REGISTER,mobile:K.account}),uni.$u.toast("发送成功"),null==(a=S.value)||a.start())},N=async()=>{var e;if(null==(e=I.value)?void 0:e.checkAgreement()){if(!K.account)return uni.$u.toast("请输入手机号码");if(!K.code&&J.value)return uni.$u.toast("请输入密码");if(!K.password)return uni.$u.toast("请输入密码");if(!K.password_confirm)return uni.$u.toast("请再次输入密码");if(K.password!=K.password_confirm)return uni.$u.toast("两次输入的密码不一致");await h(K),setTimeout((()=>{E.navigateBack()}),1500)}};return(a,o)=>{const t=y(j("page-meta"),e),l=y(j("u-input"),B),r=y(j("u-form-item"),C),s=y(j("u-verification-code"),R),x=V,v=k,w=y(j("u-form"),U),h=y(j("agreement"),G),$=y(j("u-button"),T);return u(),d(g,null,[n(t,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),n(v,{class:"register bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:i((()=>[n(v,{class:"w-full"},{default:i((()=>[n(w,{borderBottom:"","label-width":150},{default:i((()=>[n(r,{label:"手机号",borderBottom:""},{default:i((()=>[n(l,{class:"flex-1",modelValue:K.account,"onUpdate:modelValue":o[0]||(o[0]=e=>K.account=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),c(J)?(u(),m(r,{key:0,label:"验证码"},{default:i((()=>[n(l,{class:"flex-1",modelValue:K.code,"onUpdate:modelValue":o[1]||(o[1]=e=>K.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),n(v,{class:"border-l border-solid border-0 border-light pl-3 leading-4 ml-3 w-[180rpx]",onClick:L},{default:i((()=>[n(s,{ref_key:"uCodeRef",ref:S,seconds:60,onChange:F,"change-text":"x秒"},null,512),n(x,{class:f(c(H)?"text-primary":"text-muted")},{default:i((()=>[p(_(A.value),1)])),_:1},8,["class"])])),_:1})])),_:1})):b("v-if",!0),n(r,{label:"设置密码",borderBottom:""},{default:i((()=>[n(l,{class:"flex-1",type:"password",modelValue:K.password,"onUpdate:modelValue":o[2]||(o[2]=e=>K.password=e),placeholder:"请输入字母+数字组合的密码",border:!1},null,8,["modelValue"])])),_:1}),n(r,{label:"确认密码",borderBottom:""},{default:i((()=>[n(l,{class:"flex-1",type:"password",modelValue:K.password_confirm,"onUpdate:modelValue":o[3]||(o[3]=e=>K.password_confirm=e),placeholder:"再次输入密码",border:!1},null,8,["modelValue"])])),_:1})])),_:1}),n(v,{class:"mt-[40rpx]"},{default:i((()=>[n(h,{ref_key:"agreementRef",ref:I},null,512)])),_:1}),n(v,{class:"mt-[60rpx]"},{default:i((()=>[n($,{type:"primary",shape:"circle",onClick:N},{default:i((()=>[p(" 注册 ")])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-2cf9c726"]]);export{E as default};
