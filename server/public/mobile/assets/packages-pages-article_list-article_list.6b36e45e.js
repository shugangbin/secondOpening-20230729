import{d as e,r as t,ca as a,bK as l,c as s,w as o,o as n,e as i,f as u,T as c,j as r,n as d,y as f,c4 as v,k as p,_ as m,W as h,cb as g,a as b,b as _,g as y,i as x,F as w,l as k,u as S,h as C,t as F,a1 as X,cc as j,bS as B,aB as Y,S as T,A as $,ah as z,B as I,E as W,M,ab as H}from"./index-5fd89c82.js";import{_ as R}from"./page-meta.e1766212.js";import{_ as V}from"./u-badge.c3ab894f.js";import{_ as E}from"./u-sticky.5e84e153.js";import{_ as O}from"./z-paging.3f3ad392.js";import{_ as A,g as G,a as K}from"./icon_visit.a0cbdafb.js";import{_ as N}from"./u-image.adbe7f0a.js";import"./u-icon.a1449c4b.js";const Q=m(e({__name:"tab",props:{dot:{type:[Boolean,String],default:!1},name:{type:[Boolean,String],default:""},info:null},setup(e){const m=e,h=t(!1),g=t(!1),b=t(!1),_=t(void 0),y=a("updateTabs"),x=a("handleChange"),w=()=>{y&&y()},k=v();console.log(k),x(null==k?void 0:k.props,(e=>{_.value=_.value||e,h.value=e,b.value=_.value,g.value=e})),l((()=>{w()}));const S=s((()=>{const{dot:e,info:t}=m;return{dot:e,info:t}}));return o((()=>S.value),(()=>{w()})),o((()=>m.name),(e=>{w()})),(e,t)=>{const a=p;return n(),i(a,{class:d({active:h.value,inactive:!h.value,tab:!0}),style:f(g.value?"":"display: none;")},{default:u((()=>[b.value?c(e.$slots,"default",{key:0},void 0,!0):r("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-a5e2333b"]]);const U=m(e({__name:"tabs",props:{isScroll:{type:Boolean,default:!0},current:{default:0},height:{default:80},fontSize:{default:28},duration:{default:.3},activeColor:{default:"#2073F4"},inactiveColor:{default:"#333"},barWidth:{default:40},barHeight:{default:4},gutter:{default:30},bgColor:{default:"#FFFFFF"},name:{default:"name"},count:{default:"count"},offset:{default:[5,20]},bold:{type:Boolean,default:!0},activeItemStyle:{default:{}},showBar:{type:Boolean,default:!0},barStyle:{default:{}},itemWidth:{default:"auto"},isFixed:{type:Boolean,default:!1},top:{default:0},stickyBgColor:{default:"#FFFFFF"},swipeable:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:a}){const m=e,{touch:$,resetTouchStatus:z,touchStart:I,touchMove:W}=function(){const e=h({direction:"",deltaX:0,deltaY:0,offsetX:0,offsetY:0}),t=()=>{e.direction="",e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0};return{touch:e,resetTouchStatus:t,touchStart:a=>{t();const l=a.touches[0];e.startX=l.clientX,e.startY=l.clientY},touchMove:t=>{const a=t.touches[0];var l,s;e.deltaX=a.clientX-e.startX,e.deltaY=a.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY),e.direction=e.direction||((l=e.offsetX)>(s=e.offsetY)&&l>10?"horizontal":s>l&&s>10?"vertical":"")}}}(),M=t([]),H=t([]),R=t(0),O=t([]),A=t(0),G=t(0),K=t(0),N=t("cu-tab"),Q=t(m.current),U=t(!0),q=t(!1),D=v();o((()=>M.value),(async(e,t)=>{U.value||e.length===t.length||(Q.value=0),await X(),Z()})),o((()=>m.current),((e,t)=>{X((()=>{Q.value=e,te()}))}),{immediate:!0});const J=s((()=>{const e={width:m.barWidth+"rpx",transform:`translate(${G.value}px, -100%)`,"transition-duration":`${U.value?0:m.duration}s`,"background-color":m.activeColor,height:m.barHeight+"rpx",opacity:U.value?0:1,"border-radius":m.barHeight/2+"px"};return Object.assign(e,m.barStyle),e})),L=s((()=>e=>{let t={height:m.height+"rpx","line-height":m.height+"rpx","font-size":m.fontSize+"rpx",padding:m.isScroll?`0 ${m.gutter}rpx`:"",flex:m.isScroll?"auto":"1",width:`${m.itemWidth}rpx`};return e==Q.value&&m.bold&&(t.fontWeight="bold"),e==Q.value?(t.color=m.activeColor,t=Object.assign(t,m.activeItemStyle)):t.color=m.inactiveColor,t})),P=()=>{M.value=H.value.map((e=>{const{name:t,dot:a,active:l,inited:s}=e.event,{updateRender:o}=e;return{name:t,dot:a,active:l,inited:s,updateRender:o}}))},Z=async()=>{const e=await j("#"+N.value,!1,D);K.value=e.left,A.value=e.width,ee()},ee=()=>{const e=B().in(D);for(let t=0;t<M.value.length;t++)e.select(`#tab-item-${t}`).fields({size:!0,rect:!0});e.exec((e=>{O.value=e,te()}))},te=()=>{const e=O.value[Q.value];if(!e)return;const t=e.width,a=e.left-K.value-(A.value-t)/2;R.value=a<0?0:a;const l=e.left+e.width/2-K.value;G.value=l-Y(m.barWidth)/2,1==U.value&&setTimeout((()=>{U.value=!1}),100),H.value.forEach(((e,t)=>{const a=t===Q.value;a===e.event.active&&e.event.inited||e.updateRender(a)}))},ae=e=>{m.swipeable&&(q.value=!0,I(e))},le=e=>{m.swipeable&&q.value&&W(e)},se=()=>{if(!m.swipeable||!q.value)return;if("horizontal"===$.direction&&$.offsetX>=50){let e,t=M.value.length,l=Q.value;e=$.deltaX<=0?l>=t-1?0:l+1:l<=0?t-1:l-1,X((()=>{Q.value=e,te()})),a("change",e)}q.value=!1};return l((()=>{P()})),g("handleChange",((e,t)=>{H.value.push({event:e,updateRender:t})})),g("updateTabs",P),(t,l)=>{const s=b(_("u-badge"),V),o=p,v=T,m=b(_("u-sticky"),E);return n(),i(o,{class:"tabs"},{default:u((()=>[y(m,{enable:e.isFixed,"bg-color":e.stickyBgColor,"offset-top":e.top,"h5-nav-height":0},{default:u((()=>[y(o,{id:N.value,style:f({background:e.bgColor})},{default:u((()=>[y(v,{style:f({height:e.height+"rpx"}),"scroll-x":"",class:"scroll-view","scroll-left":R.value,"scroll-with-animation":""},{default:u((()=>[y(o,{class:d(["scroll-box",{"tabs-scorll-flex":!e.isScroll}])},{default:u((()=>[(n(!0),x(w,null,k(M.value,((t,l)=>(n(),i(o,{class:"tab-item line1",id:"tab-item-"+l,key:l,onClick:e=>(e=>{e!=Q.value&&(X((()=>{Q.value=e,te()})),a("change",e))})(l),style:f([S(L)(l)])},{default:u((()=>[y(s,{count:t[e.count]||t.dot||0,offset:e.offset,size:"mini"},null,8,["count","offset"]),C(" "+F(t[e.name]||t.name),1)])),_:2},1032,["id","onClick","style"])))),128)),e.showBar?(n(),i(o,{key:0,class:"tab-bar",style:f([S(J)])},null,8,["style"])):r("v-if",!0)])),_:1},8,["class"])])),_:1},8,["style","scroll-left"])])),_:1},8,["id","style"])])),_:1},8,["enable","bg-color","offset-top"]),y(o,{class:"tab-content",onTouchstart:ae,onTouchmove:le,onTouchcancel:se,onTouchend:se},{default:u((()=>[r(' <view class="tab-track" :class="{\'tab-animated\': animated}" :style="[trackStyle]"> '),y(o,null,{default:u((()=>[c(t.$slots,"default",{},void 0,!0)])),_:3}),r(" </view> ")])),_:3})])),_:3})}}}),[["__scopeId","data-v-8444e9c6"]]),q=m(e({__name:"news-card",props:{item:{default:{}},newsId:{default:""}},setup:e=>(t,a)=>{const l=b(_("u-image"),N),s=p,o=$,c=z;return n(),i(c,{url:`/packages/pages/article_detail/article_detail?id=${e.newsId}`},{default:u((()=>[y(s,{class:"news-card flex bg-white px-[20rpx] py-[32rpx]"},{default:u((()=>[e.item.image?(n(),i(s,{key:0,class:"mr-[20rpx]"},{default:u((()=>[y(l,{src:e.item.image,width:"240",height:"180"},null,8,["src"])])),_:1})):r("v-if",!0),y(s,{class:"flex flex-col justify-between flex-1 news-card-content"},{default:u((()=>[y(s,{class:"text-lg font-medium news-card-content-title"},{default:u((()=>[C(F(e.item.title),1)])),_:1}),y(s,{class:"news-card-content-intro text-gray-400 text-sm mt-[16rpx]"},{default:u((()=>[C(F(e.item.desc),1)])),_:1}),y(s,{class:"text-muted text-xs w-full flex justify-between mt-[12rpx]"},{default:u((()=>[y(s,null,{default:u((()=>[C(F(e.item.create_time),1)])),_:1}),y(s,{class:"flex items-center"},{default:u((()=>[y(o,{src:A,class:"w-[30rpx] h-[30rpx]"}),y(s,{class:"ml-[10rpx]"},{default:u((()=>[C(F(e.item.click),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["url"])}}),[["__scopeId","data-v-c63ffdee"]]),D=e({__name:"news-list",props:{cid:{default:0},i:null,index:null},setup(e){const a=e,l=I(null),s=t([]),c=t(!0);o((()=>a.index),(async()=>{var e;await X(),a.i==a.index&&c.value&&(c.value=!1,null==(e=l.value)||e.reload())}),{immediate:!0});const r=async(e,t)=>{try{const{lists:s}=await G({cid:a.cid,page_no:e,page_size:t});l.value.complete(s)}catch(s){console.log("报错=>",s),l.value.complete(!1)}};return W((()=>{var e;a.index!=a.i||S(c)||null==(e=l.value)||e.reload()})),(t,a)=>{const o=b(_("z-paging"),O);return n(),i(o,{"auto-show-back-to-top":"",auto:e.i==e.index,ref_key:"paging",ref:l,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),"data-key":e.i,onQuery:r,fixed:!1,height:"100%","auto-clean-list-when-reload":!1,"auto-scroll-to-top-when-reload":!1},{default:u((()=>[(n(!0),x(w,null,k(s.value,((e,t)=>(n(),i(q,{key:t,item:e,newsId:e.id},null,8,["item","newsId"])))),128))])),_:1},8,["auto","modelValue","data-key"])}}}),J=m(e({__name:"article_list",setup(e){const a=t([]),l=t(0),s=e=>{console.log(e),l.value=Number(e)};return M((e=>{(async()=>{const e=await K();a.value=[{name:"全部",id:""}].concat(e)})(),console.log(e),H({title:e.pageTitle})})),(e,t)=>{const o=b(_("page-meta"),R),c=p,d=b(_("tab"),Q),f=b(_("tabs"),U);return n(),x(w,null,[y(o,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),y(c,{class:"news"},{default:u((()=>[r(" 内容 "),y(f,{current:l.value,onChange:s,height:"80","bar-width":"60",activeColor:e.$theme.primaryColor,barStyle:{bottom:"0"}},{default:u((()=>[(n(!0),x(w,null,k(a.value,((e,t)=>(n(),i(d,{key:t,name:e.name},{default:u((()=>[y(c,{class:"news-list pt-[20rpx]"},{default:u((()=>[y(D,{cid:e.id,i:t,index:l.value},null,8,["cid","i","index"])])),_:2},1024)])),_:2},1032,["name"])))),128))])),_:1},8,["current","activeColor"])])),_:1})],64)}}}),[["__scopeId","data-v-a18b218c"]]);export{J as default};
