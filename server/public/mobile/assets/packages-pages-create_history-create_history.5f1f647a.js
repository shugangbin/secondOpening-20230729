import{d as e,x as a,W as t,r as l,B as s,M as o,o as r,i,g as u,f as p,a4 as n,a5 as m,h as c,t as d,e as f,j as _,F as x,l as y,ac as v,L as g,a as h,b as j,k as w,A as b,S as k,u as C}from"./index-5fd89c82.js";import{_ as V}from"./page-meta.e1766212.js";import{_ as $}from"./u-image.adbe7f0a.js";import{_ as z,a as S}from"./create_record.9e9c67d9.js";import{_ as T}from"./z-paging.3f3ad392.js";import{_ as U}from"./u-popup.f70e8582.js";import{f as H,g as L,c as A}from"./chat.b5adffe9.js";import{u as B}from"./useCopy.dbed25b8.js";import"./u-icon.a1449c4b.js";import"./text-item.vue_vue_type_script_setup_true_lang.eddf7716.js";import"./_commonjsHelpers.8b4586d6.js";const D=e({__name:"create_history",setup(e){const{copy:D}=B();a();const F=t({id:0,type:2}),G=l({}),M=l(!1),N=t({title:"",text:""}),P=l([]),Q=s(),R=async(e,a)=>{var t;const l=(await L({other_id:F.id,type:F.type,page_no:e,page_size:a})).lists.map((e=>{let a="";if(v(e.ask)){const t=(null==e?void 0:e.ask[0])||{};a=`${t.title}：${t.value}`}else a=e.ask;return{...e,title:a}}));null==(t=Q.value)||t.complete(l)},W=async()=>{var e;(await g({title:"温馨提示",content:"删除的记录无法恢复，确定？"})).cancel||(await A({type:F.type,other_id:F.id}),null==(e=Q.value)||e.reload())};return o((async e=>{var a;F.id=Number(null==e?void 0:e.id),await(async()=>{const e=await H({id:F.id});G.value=e})(),null==(a=Q.value)||a.reload(!0)})),(e,a)=>{const t=h(j("page-meta"),V),l=h(j("u-image"),$),s=w,o=h(j("creation-history-item"),S),v=b,g=h(j("z-paging"),T),H=k,L=h(j("u-popup"),U);return r(),i(x,null,[u(t,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),u(g,{ref_key:"pagingRef",ref:Q,auto:!1,modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e),"auto-show-back-to-top":"",onQuery:R},{top:p((()=>[n(u(s,{class:"flex items-center p-[20rpx]"},{default:p((()=>[u(l,{src:G.value.image,width:"42",height:"42"},null,8,["src"]),u(s,{class:"flex-1 min-w-0 text-xl font-medium line-clamp-1 mx-[20rpx]"},{default:p((()=>[c(d(G.value.name),1)])),_:1}),P.value.length?(r(),f(s,{key:0,class:"text-sm",onClick:W},{default:p((()=>[c(" 清空记录 ")])),_:1})):_("v-if",!0)])),_:1},512),[[m,G.value.name]])])),empty:p((()=>[u(s,{class:"flex flex-col justify-center items-center pb-[300rpx]"},{default:p((()=>[u(v,{class:"w-[300rpx] h-[300rpx]",src:z,alt:""}),u(s,{class:"my-[32rpx] text-muted"},{default:p((()=>[c(" 暂无数据～ ")])),_:1})])),_:1})])),default:p((()=>[u(s,{class:"px-[20rpx]"},{default:p((()=>[(r(!0),i(x,null,y(P.value,(e=>(r(),f(s,{class:"mt-[20rpx]",key:e.id},{default:p((()=>[u(o,{title:e.title,time:e.create_time,content:e.reply,overflow:!0,onCopy:C(D),onDelete:W,onClickTitle:a=>{return t=a,l=e.title,N.text=t,N.title=l,void(M.value=!0);var t,l}},null,8,["title","time","content","onCopy","onClickTitle"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),u(L,{modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),mode:"bottom","border-radius":"14",closeable:""},{default:p((()=>[u(s,{class:"h-[85vh] flex flex-col"},{default:p((()=>[u(s,{class:"p-[30rpx] pr-[60rpx] text-xl font-medium border-0 border-b border-light border-solid"},{default:p((()=>[u(s,{class:"line-clamp-1"},{default:p((()=>[c(" 标题详情 ")])),_:1})])),_:1}),u(s,{class:"flex-1 min-h-0"},{default:p((()=>[u(H,{class:"h-full","scroll-y":""},{default:p((()=>[u(s,{class:"p-[30rpx]"},{default:p((()=>[u(s,{class:"flex-1 min-w-0 text-lg whitespace-pre-wrap"},{default:p((()=>[c(d(N.title),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}});export{D as default};
